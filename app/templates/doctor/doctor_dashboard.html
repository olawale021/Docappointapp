<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Healthcare Portal</title>

  <!-- Bootstrap CSS -->
	<script src="https://kit.fontawesome.com/ad92737229.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>

  <!-- Main Wrapper -->
	<div class="main-wrapper">

		<!-- Header -->
		<header class="header header-custom header-fixed header-one">
				<div class="container">
					<nav class="navbar navbar-expand-lg header-nav">
						<div class="navbar-header">
							<a id="mobile_btn" href="javascript:void(0);">
								<span class="bar-icon">
									<span></span>
									<span></span>
									<span></span>
								</span>
							</a>
							<a href="index.html" class="navbar-brand logo">
								<img src="/static/img/logo.png" class="img-fluid" alt="Logo">
							</a>
						</div>
						<div class="main-menu-wrapper">
							<div class="menu-header">
								<a href="/" class="menu-logo">
									<img src="/static/img/logo.png" class="img-fluid" alt="Logo">
								</a>
								<a id="menu_close" class="menu-close" href="javascript:void(0);">
									<i class="fas fa-times"></i>
								</a>
							</div>
							<ul class="main-nav">
							<li class="has-submenu megamenu">
								<a href="/">Home <i class="fas fa-chevron-down"></i></a>

							</li>
								<li class="has-submenu">
									<a href="/doctor_dashboard">Doctors <i class="fas fa-chevron-down"></i></a>

								</li>
								<li class="has-submenu">
									<a href="/patient_dashboard">Patients <i class="fas fa-chevron-down"></i></a>

								</li>
								<li class="has-submenu">
									<a href="javascript:void(0);">Pharmacy <i class="fas fa-chevron-down"></i></a>
									<ul class="submenu">
										<li><a href="pharmacy-index.html">Pharmacy</a></li>
										<li><a href="pharmacy-details.html">Pharmacy Details</a></li>
										<li><a href="pharmacy-search.html">Pharmacy Search</a></li>
										<li><a href="product-all.html">Product</a></li>

										<li><a href="pharmacy-register.html">Pharmacy Register</a></li>
									</ul>
								</li>

								<li class="has-submenu">
									<a href="#">Blog <i class="fas fa-chevron-down"></i></a>
									<ul class="submenu">
										<li><a href="blog-list.html">Blog List</a></li>
										<li><a href="blog-grid.html">Blog Grid</a></li>
										<li><a href="blog-details.html">Blog Details</a></li>
									</ul>
								</li>
								<li class="has-submenu">
									<a href="#">Admin <i class="fas fa-chevron-down"></i></a>
									<ul class="submenu">
										<li><a href="/admin_login" target="_blank">Admin</a></li>
										<li><a href="" target="_blank">Pharmacy Admin</a></li>
									</ul>
								</li>
								<li class="searchbar">
									<a href="javascript:void(0);"><i class="feather-search"></i></a>
									<div class="togglesearch">
										<form action="search.html">
											<div class="input-group">
												<input type="text" class="form-control">
												<button type="submit" class="btn">Search</button>
											</div>
										</form>
									</div>
								</li>
							</ul>
						</div>
					</nav>
				</div>
			</header>
		<!-- /Header -->


        <!-- Breadcrumb -->
			<div class="breadcrumb-bar-two">
				<div class="container">
					<div class="row align-items-center inner-banner">
						<div class="col-md-12 col-12 text-center">
							<h2 class="breadcrumb-title">Dashboard</h2>
							<nav aria-label="breadcrumb" class="page-breadcrumb">
								<ol class="breadcrumb">
									<li class="breadcrumb-item"><a href="/">Home</a></li>
									<li class="breadcrumb-item" aria-current="page">Dashboard</li>
								</ol>
							</nav>
						</div>
					</div>
				</div>
			</div>
			<!-- /Breadcrumb -->


        <!-- Page Content -->
			<div class="content">
				<div class="container">

					<div class="row">
						<div class="col-md-5 col-lg-4 col-xl-3 theiaStickySidebar">

							<!-- Profile Sidebar -->
							<div class="profile-sidebar">
								<div class="widget-profile pro-widget-content">
									<div class="profile-info-widget">
										<a href="#" class="booking-doc-img">
											<img src="{{doctor.image_url}}" alt="User Image">
										</a>
										<div class="profile-det-info">
											<h3>{{ doctor.username }}</h3>

											<div class="patient-details">
												<h5 class="mb-0">{{ doctor.specialty }}</h5>
											</div>

											<div class="patient-details">
												<h5 class="mb-0">{{ doctor.hospital }}</h5>
											</div>
										</div>
									</div>
								</div>
								<div class="dashboard-widget">
									<nav class="dashboard-menu">
										<ul>
											<li class="active">
												<a href="doctor-dashboard.html">
													<i class="fas fa-columns"></i>
													<span>Dashboard</span>
												</a>
											</li>
											<li>
												<a href="/doctor_appointment">
													<i class="fas fa-calendar-check"></i>
													<span>Appointments</span>
												</a>
											</li>
											<li>
												<a href="my-patients.html">
													<i class="fas fa-user-injured"></i>
													<span>My Patients</span>
												</a>
											</li>
											<li>
												<a href="schedule-timings.html">
													<i class="fas fa-hourglass-start"></i>
													<span>Schedule Timings</span>
												</a>
											</li>
											<li>
												<a href="available-timings.html">
													<i class="fas fa-clock"></i>
													<span>Available Timings</span>
												</a>
											</li>

											<li >
												<a href="/doctor_profile_settings">
													<i class="fas fa-user-cog"></i>
													<span>Profile Settings</span>
												</a>
											</li>

											<li>
												<a href="doctor-change-password.html">
													<i class="fas fa-lock"></i>
													<span>Change Password</span>
												</a>
											</li>
											<li>

												<a href="/doctor_logout">
													<i class="fas fa-sign-out-alt"></i>
													<span>Logout</span>
												</a>
											</li>
										</ul>
									</nav>
								</div>
							</div>
							<!-- /Profile Sidebar -->
						</div>

						       <div class="col-md-7 col-lg-8 col-xl-9">
								   {% with messages = get_flashed_messages(with_categories=True) %}
															  {% if messages %}
																{% for category, message in messages %}
																  <div class="alert alert-{{ category }}">{{ message }}</div>
																{% endfor %}
															  {% endif %}
															{% endwith %}
									<div class="row">
										<div class="col-md-12">
											<div class="card dash-card">
												<div class="card-body">
													<div class="row">
														<div class="col-md-12 col-lg-4">
															<div class="dash-widget dct-border-rht">
																<div class="circle-bar circle-bar1">
																	<div class="circle-graph1" data-percent="75">
																		<img src="static/img/icon-01.png" class="img-fluid" alt="patient">
																	</div>
																</div>
																<div class="dash-widget-info">
																	<h6>Total Patient</h6>
																	<h3>1500</h3>
																	<p class="text-muted">Till Today</p>
																</div>
															</div>
														</div>

														<div class="col-md-12 col-lg-4">
															<div class="dash-widget dct-border-rht">
																<div class="circle-bar circle-bar2">
																	<div class="circle-graph2" data-percent="65">
																		<img src="/static/img/icon-02.png" class="img-fluid" alt="Patient">
																	</div>
																</div>
																<div class="dash-widget-info">
																	<h6>Today Patient</h6>
																	<h3>160</h3>
																	<p class="text-muted">06, Nov 2023</p>
																</div>
															</div>
														</div>

														<div class="col-md-12 col-lg-4">
															<div class="dash-widget">
																<div class="circle-bar circle-bar3">
																	<div class="circle-graph3" data-percent="50">
																		<img src="/static/img/icon-03.png" class="img-fluid" alt="Patient">
																	</div>
																</div>
																<div class="dash-widget-info">
																	<h6>Appoinments</h6>
																	<h3>85</h3>
																	<p class="text-muted">06, Apr 2023</p>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>


									<div class="row">
										<div class="col-md-12">
											<h4 class="mb-4">Patient Appoinment</h4>
											<div class="appointment-tab">

												<!-- Appointment Tab -->
												<ul class="nav nav-tabs nav-tabs-solid nav-tabs-rounded">
													<li class="nav-item">
														<a class="nav-link active" href="#fixed-appointments" data-bs-toggle="tab">Upcoming</a>
													</li>
													<li class="nav-item">
														<a class="nav-link" href="#requested-appointments" data-bs-toggle="tab">Today</a>
													</li>
												</ul>
												<!-- /Appointment Tab -->

												<div class="tab-content">

												<!-- Upcoming Appointment Tab -->
												<div class="tab-pane show active" id="fixed-appointments">
													<div class="card card-table mb-0">
														<div class="card-body">
															<h3>Fixed Appointments</h3>

															<div class="table-responsive">
																<table class="table table-hover table-center mb-0">
																	<thead>
																		<tr>
																			<th>Patient Name</th>
																			<th>Appt Date</th>
																			<th>Action</th>
																		</tr>
																	</thead>
																	<tbody>
																		{% for appointment in fixed_appointments %}
																		<tr>
																			<td>
																				<h2 class="table-avatar">
																					<a href="/patient-profile/{{ appointment.patient_id }}" class="avatar avatar-sm me-2">
																						<img class="avatar-img rounded-circle" src="{{appointment.patient_info.image_url}}" alt="User Image">
																					</a>
																					<a href="/patient-profile/{{ appointment.patient_id }}">{{ appointment.patient_info.full_name }}</a>
																				</h2>
																			</td>
																			<td>
																				{{ appointment.formatted_date }}
																				<span class="d-block text-info">{{ appointment.formatted_date }}</span>
																			</td>
																			<td>{{ appointment.purpose }}</td>
																			<td>{{ appointment.type }}</td>
																			<td>{{ appointment.paid_amount | default("N/A") }}</td>
																			<td>
																				<div class="table-action">
																					<a href="/appointment-details/{{ appointment._id }}" class="btn btn-sm bg-info-light">
																						<i class="far fa-eye"></i> View
																					</a>
																					<a href="/cancel-appointment/{{ appointment._id }}" class="btn btn-sm bg-danger-light">
																						<i class="fas fa-times"></i> Cancel
																					</a>
																				</div>
																			</td>
																		</tr>
																		{% else %}
																		<tr>
																			<td colspan="6" class="text-center">No fixed appointments found.</td>
																		</tr>
																		{% endfor %}
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>

									<!-- /Upcoming Appointment Tab -->

									<!-- Today Appointment Tab -->
									<div class="tab-pane show active" id="requested-appointments">
										<div class="card card-table mb-0">
											<div class="card-body">
												<h3>Appointment Requests</h3>
												<div class="table-responsive">
													<table class="table table-hover table-center mb-0">
														<thead>
															<tr>
																<th>Patient Name</th>
																<th>Appt Date</th>
																<th>Action</th>
															</tr>
														</thead>
														<tbody>
															{% for appointment in appointment_requests %}
															<tr>
																<td>
																	<h2 class="table-avatar">
																		<a href="patient-profile.html" class="avatar avatar-sm me-2">
																			<img class="avatar-img rounded-circle" src="{{ appointment.patient_info.image_url}}" alt="User Image">
																		</a>
																		<a href="">{{ appointment.patient_name }} <span>{{ appointment.patient_info.full_name }}</span></a>
																	</h2>
																</td>
																<td>{{ appointment.formatted_date }} <span class="d-block text-info">{{ appointment.time }}</span></td>
																<td>
																	<div class="table-action">
																		<a href="javascript:void(0);" class="btn btn-sm bg-info-light">
																			<i class="far fa-eye"></i> View
																		</a>
																		<a href="/approve_appointment/{{ appointment._id }}" class="btn btn-sm bg-success-light">
																			<i class="fas fa-check"></i> Accept
																		</a>
																		<a href="/cancel_appointment/{{ appointment._id }}" class="btn btn-sm bg-danger-light">
																			<i class="fas fa-times"></i> Cancel
																		</a>
																	</div>
																</td>
															</tr>
															{% endfor %}
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
										<!-- /Today Appointment Tab -->
							   </div>
							</div>
						</div>
					</div>

				</div>

			</div>
			<!-- /Page Content -->


		<!-- Footer -->
			<footer class="footer footer-one">
				<div class="footer-top">
					<div class="container">
						<div class="row">
							<div class="col-lg-3 col-md-4">
								<div class="footer-widget footer-about">
									<div class="footer-logo">
										<a href="index.html"><img src="assets/img/logo.png" alt="logo"></a>
									</div>
									<div class="footer-about-content">
										<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore.</p>
									</div>
								</div>
							</div>
							<div class="col-lg-6">
								<div class="row">
									<div class="col-lg-3 col-md-4">
										<div class="footer-widget footer-menu">
											<h2 class="footer-title">For Patients</h2>
											<ul>
												<li><a href="search.html">Search for Doctors</a></li>
												<li><a href="login.html">Login</a></li>
												<li><a href="register.html">Register</a></li>
											</ul>
										</div>
									</div>
									<div class="col-lg-3 col-md-4">
										<div class="footer-widget footer-menu">
											<h2 class="footer-title">For Doctors</h2>
											<ul>
												<li><a href="appointments.html">Appointments</a></li>
												<li><a href="chat.html">Chat</a></li>
												<li><a href="login.html">Login</a></li>
											</ul>
										</div>
									</div>
									<div class="col-lg-6 col-md-4">
										<div class="footer-widget footer-contact">
											<h2 class="footer-title">Contact Us</h2>
											<div class="footer-contact-info">
												<div class="footer-address">
													<p><i class="feather-map-pin"></i> 3556 Beech Street, Coventry</p>
												</div>
												<div class="footer-address">
													<p><i class="feather-phone-call"></i> +44 315 369 5943</p>
												</div>
												<div class="footer-address mb-0">
													<p><i class="feather-mail"></i> ola</p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-lg-3 col-md-7">
								<div class="footer-widget">
									<h2 class="footer-title">Join Our Newsletter</h2>
									<div class="subscribe-form">
										<form action="#">
		                                    <input type="email" class="form-control" placeholder="Enter Email">
		                                    <button type="submit" class="btn">Submit</button>
	                                    </form>
	                                </div>
									<div class="social-icon">
									<ul>
										<li>
											<a href="javascript:void(0);"><i class="fab fa-facebook"></i></a>
										</li>
										<li>
											<a href="javascript:void(0);"><i class="fab fa-instagram"></i></a>
										</li>
										<li>
											<a href="javascript:void(0);"><i class="fab fa-twitter"></i></a>
										</li>
										<li>
											<a href="javascript:void(0);"><i class="fab fa-linkedin-in"></i></a>
										</li>
									</ul>
								</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="footer-bottom">
					<div class="container">
						<!-- Copyright -->
						<div class="copyright">
							<div class="row">
								<div class="col-md-6 col-lg-6">
									<div class="copyright-text">
										<p class="mb-0"> Copyright © 2024 <a href="" target="_blank">STEP-CARE.</a> All Rights Reserved</p>
									</div>
								</div>
								<div class="col-md-6 col-lg-6">

									<!-- Copyright Menu -->
									<div class="copyright-menu">
										<ul class="policy-menu">
											<li><a href="privacy-policy.html">Privacy Policy</a></li>
											<li><a href="terms-condition.html">Terms and Conditions</a></li>
										</ul>
									</div>
									<!-- /Copyright Menu -->

								</div>
							</div>
						</div>
						<!-- /Copyright -->
					</div>
				</div>
			</footer>
			<!-- /Footer -->
	</div>
	<!-- /Main Wrapper -->
		<script>
		  // Wait for the DOM to be loaded
		  document.addEventListener('DOMContentLoaded', function() {
			// Check if the flash message exists
			var flashMessage = document.getElementById('flash-message');
			if (flashMessage) {
			  // Set a timeout to hide the flash message after 2000 milliseconds (2 seconds)
			  setTimeout(function() {
				flashMessage.style.display = 'none';
			  }, 2000); // 2000 milliseconds = 2 seconds
			}
		  });
		</script>
</body>
</html>

